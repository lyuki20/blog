<!doctype html><html lang=en-US><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://yuuu.uk/images/favicon.png><title>automating obsidian to github pages | yuki's notes</title><meta name=title content="automating obsidian to github pages"><meta name=description content="How I wired Obsidian, Hugo, and GitHub Pages together with a PowerShell deployment script."><meta name=keywords content="automation,git,powershell,hugo,"><meta property="og:url" content="https://yuuu.uk/posts/automation-pipeline-overview/"><meta property="og:site_name" content="yuki's notes"><meta property="og:title" content="automating obsidian to github pages"><meta property="og:description" content="How I wired Obsidian, Hugo, and GitHub Pages together with a PowerShell deployment script."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-26T19:01:11+09:00"><meta property="article:modified_time" content="2025-10-26T19:01:11+09:00"><meta property="article:tag" content="Automation"><meta property="article:tag" content="Git"><meta property="article:tag" content="Powershell"><meta property="article:tag" content="Hugo"><meta property="og:image" content="https://yuuu.uk/images/share.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yuuu.uk/images/share.png"><meta name=twitter:title content="automating obsidian to github pages"><meta name=twitter:description content="How I wired Obsidian, Hugo, and GitHub Pages together with a PowerShell deployment script."><meta itemprop=name content="automating obsidian to github pages"><meta itemprop=description content="How I wired Obsidian, Hugo, and GitHub Pages together with a PowerShell deployment script."><meta itemprop=datePublished content="2025-10-26T19:01:11+09:00"><meta itemprop=dateModified content="2025-10-26T19:01:11+09:00"><meta itemprop=wordCount content="496"><meta itemprop=image content="https://yuuu.uk/images/share.png"><meta itemprop=keywords content="Automation,Git,Powershell,Hugo"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#01242e;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;border-radius:3px}blockquote{border-left:1px solid #999;color:var(--blockquote-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>yuki's notes</h2></a><nav><a href=https://yuuu.uk/>home</a>
<a href=https://yuuu.uk/posts/>posts</a></nav></header><main><content><p>I turned my local obsidian notes into a fully automated publishing pipeline. here&rsquo;s how i did it.</p><h2 id=goals>goals</h2><ul><li>write notes in obsidian</li><li>Sync them into my Hugo site directory</li><li>build static pages, commit, and push to GitHub</li><li>publish automatically using github pages</li></ul><h2 id=architecture-overview>architecture overview</h2><p><img src=/obsidian/Pasted%20image%2020251026210649.png alt></p><h2 id=the-deployment-script>The deployment script</h2><p>created a script so that one command handles everything:</p><ol><li>validates paths and required commands (
sync, hugo, git).</li><li>uses
sync &ndash;delete to mirror obsidian posts into content/posts.</li><li>Runs hugo &ndash;minify inside WSL to build the site.</li><li>Pushes main to github repository via SSH.</li><li>publishes the public/ directory by pushing a gh-pages branch via git subtree split.</li></ol><pre tabindex=0><code>[CmdletBinding()]

Param(

    [string]$CommitMessage

)

  

$obsidianWindowsPath = &#34;E:\iCloud\iCloudDrive\Obsidian\notes\posts&#34;

$obsidianWslPath = &#34;/mnt/e/iCloud/iCloudDrive/Obsidian/notes/posts&#34;

$hugoProjectPath = &#34;/home/ubuntu/blog/blog&#34;

$hugoContentPostsPath = &#34;$hugoProjectPath/content/posts&#34;

$remoteName = &#34;origin&#34;

$mainBranch = &#34;main&#34;

$pagesBranch = &#34;gh-pages&#34;

  

function Invoke-WSL {

    param(

        [Parameter(Mandatory = $true)]

        [string]$Command

    )

  

    Write-Host &#34;WSL&gt; $Command&#34;

    &amp; wsl.exe bash -lc $Command

    if ($LASTEXITCODE -ne 0) {

azsA        throw &#34;WSL command failed with exit code ${LASTEXITCODE}: $Command&#34;

    }

}

  

function ConvertTo-BashSingleQuoted {

    param(

        [Parameter(Mandatory = $true)]

        [string]$Value

    )

  

    return &#34;&#39;&#34; + ($Value -replace &#34;&#39;&#34;, &#34;&#39;\\&#39;&#39;&#34;) + &#34;&#39;&#34;

}

  

function Ensure-WSLCommand {

    param(

        [Parameter(Mandatory = $true)]

        [string]$Name

    )

  

    Invoke-WSL &#34;command -v $Name &gt;/dev/null 2&gt;&amp;1 || { echo &#39;Missing required command: $Name&#39; &gt;&amp;2; exit 1; }&#34;

}

  

function Ensure-WSLPath {

    param(

        [Parameter(Mandatory = $true)]

        [string]$Path

    )

  

    Invoke-WSL &#34;if [ ! -d &#39;$Path&#39; ]; then echo &#39;Missing required path: $Path&#39; &gt;&amp;2; exit 1; fi&#34;

}

  

try {

    if (-not (Test-Path -LiteralPath $obsidianWindowsPath)) {

        throw &#34;Obsidian source path not found: $obsidianWindowsPath&#34;

    }

  

    Ensure-WSLPath -Path $hugoProjectPath

    Ensure-WSLPath -Path $hugoContentPostsPath

    Ensure-WSLCommand -Name &#34;rsync&#34;

    Ensure-WSLCommand -Name &#34;hugo&#34;

    Ensure-WSLCommand -Name &#34;git&#34;

  

    Write-Host &#34;Syncing Obsidian posts into Hugo content...&#34;

    $syncCommand = &#34;rsync -av --delete --exclude &#39;.git&#39; --exclude &#39;_index.md&#39; &#39;$obsidianWslPath/&#39; &#39;$hugoContentPostsPath/&#39;&#34;

    Invoke-WSL $syncCommand

  

    Write-Host &#34;Building site with Hugo...&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; hugo --minify&#34;

  

    Write-Host &#34;Checking for changes...&#34;

    $gitStatus = &amp; wsl.exe bash -lc &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git status --porcelain&#34;

    if ([string]::IsNullOrWhiteSpace($gitStatus)) {

        Write-Host &#34;No changes detected. Nothing to commit.&#34;

        exit 0

    }

  

    Write-Host &#34;Staging changes...&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git add -A&#34;

  

    if ([string]::IsNullOrWhiteSpace($CommitMessage)) {

        $CommitMessage = &#34;Publish $(Get-Date -Format &#39;yyyy-MM-dd HH:mm:ss&#39;)&#34;

    }

    $commitShellArg = ConvertTo-BashSingleQuoted -Value $CommitMessage

  

    Write-Host &#34;Committing...&#34;

    Invoke-WSL (&#34;cd &#39;{0}&#39; &amp;&amp; git commit -m {1}&#34; -f $hugoProjectPath, $commitShellArg)

  

    Write-Host &#34;Pushing to $mainBranch...&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git push $remoteName $mainBranch&#34;

  

    Write-Host &#34;Publishing static site to $pagesBranch...&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git branch -D gh-pages-tmp &gt;/dev/null 2&gt;&amp;1 || true&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git subtree split --prefix public -b gh-pages-tmp&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git push $remoteName gh-pages-tmp:$pagesBranch&#34;

    Invoke-WSL &#34;cd &#39;$hugoProjectPath&#39; &amp;&amp; git branch -D gh-pages-tmp&#34;

  

    Write-Host &#34;Deployment complete.&#34;

}

catch {

    Write-Error $_

    exit 1

}
</code></pre><p>PowerShell invocation example:</p><p>`powershell</p><pre tabindex=0><code>powershell.exe -ExecutionPolicy Bypass -File .\deploy-blog.ps1 -CommitMessage &#34;publish new notes&#34;
</code></pre><h2 id=github-setup>GitHub setup</h2><ul><li>Created the repository under my lyuki20 account and configured SSH access from WSL.</li><li>Pushed the hugo source to main.</li><li>Enabled github pages on the <code>gh-pages</code>branch.</li></ul><h2 id=result>Result</h2><p>Running the script now syncs whatever I write in Obsidian, rebuilds the Hugo site, pushes the commits, and republishes GitHub Pages instantly.</p></content><p><a href=https://yuuu.uk/blog/automation/>#Automation</a>
<a href=https://yuuu.uk/blog/git/>#Git</a>
<a href=https://yuuu.uk/blog/powershell/>#Powershell</a>
<a href=https://yuuu.uk/blog/hugo/>#Hugo</a></p></main><footer></footer></body></html>